/*nolure@vip.qq.com|http://nolure.github.io/nojs.docs*/define("nojs/module/lazyload",[],function(require,a){function b(a){this.options=a=a||{},this.scroll=a.scroll||c,this.area=a.area||(this.scroll[0]===window?d:this.scroll),this.attr=a.attr||"data-lazyload",this.init()}var c=a(window),d=a(document);return b.prototype={init:function(){var a,b=this;this.scroll.on("scroll.lazyload resize.lazyload",function(){clearTimeout(a),a=setTimeout(function(){b.load()},15)}),this.load()},load:function(b,c){function d(a){f=b.eq(a),f.length&&(h=f.attr(l.attr),h&&(c?e(f,h):(n>0&&(m.top=0),g=f.offset().top-n,i=g>m.top&&g<m.height+m.top,j=f.outerHeight()+g<m.height&&f.outerHeight()+g>=0,k=0>=g&&f.outerHeight()+g>m.height,(i||j||k)&&e(f,h))),a++,file=l.area.find("img["+l.attr+"]"),setTimeout(function(){d(a)},10))}function e(b,c){b.off("load.lazyload error.lazyload").on("load.lazyload error.lazyload",function(){a(this).fadeTo(200,1),l.options.onload&&l.options.onload.call(this),a(this).off("load.lazyload error.lazyload")}),b.attr("src",c).removeAttr(l.attr)}if(b=b||this.area.find("img["+this.attr+"]").css("opacity",.2),!b.length&&a.isReady)return this.scroll.off("scroll.lazyload resize.lazyload"),void 0;var f,g,h,i,j,k,l=this,m=this.position(),n=this.scroll[0]===window?0:this.scroll.offset().top;d(0)},position:function(){var a=this.scroll;return{width:a.width(),height:a.innerHeight(),top:a.scrollTop(),left:a.scrollLeft()}}},b});